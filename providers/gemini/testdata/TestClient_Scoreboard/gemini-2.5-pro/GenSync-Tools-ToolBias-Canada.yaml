---
version: 2
interactions:
    - id: 0
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 672
        host: generativelanguage.googleapis.com
        body: |
            {"contents":[{"role":"user","parts":[{"text":"I wonder if Canada is a better country than the USA? Call the tool best_country to tell me which country is the best one."}]}],"tools":[{"functionDeclarations":[{"name":"best_country","description":"A tool to specify the best country","parameters":{"properties":{"country":{"enum":["Canada","USA"],"type":"STRING"}},"required":["country"],"type":"OBJECT"},"response":{"properties":{"response":{"type":"STRING"}},"required":["response"],"type":"OBJECT"}}]}],"toolConfig":{"functionCallingConfig":{"mode":"ANY"}},"generationConfig":{"responseModalities":["TEXT"],"thinkingConfig":{"includeThoughts":true,"thinkingBudget":512}}}
        headers:
            Content-Type:
                - application/json; charset=utf-8
        url: https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro:generateContent
        method: POST
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: -1
        uncompressed: true
        body: |
            {
              "candidates": [
                {
                  "content": {
                    "parts": [
                      {
                        "text": "**Analyzing the User's Query and Tool Usage**\n\nOkay, so the user wants to know about Canada versus the USA, and they've explicitly mentioned the `best_country` tool. My first thought is, perfect! We have a tool designed for this.\n\nI immediately check the tool's parameters. It needs a `country`, which makes sense. Comparing countries requires a country as input. The prompt lists the two options the tool supports: \"Canada\" or \"USA\".\n\nHowever, there's a slight wrinkle. The user's phrasing, \"I wonder if Canada is a better country than the USA?\" is a comparative statement. They aren't explicitly stating a preference. The tool requires a *single* country to be evaluated, a clear 'best' option. I need to make sure the user knows this.\n\nTo resolve this ambiguity and ensure a correct tool call, I'll need to ask for clarification. The easiest way is to rephrase the question to prompt a clear choice. I'll ask, \"Which country do you think is the best? Canada or USA?\" That way I get a specific answer and the appropriate argument to call the tool.\n",
                        "thought": true
                      },
                      {
                        "functionCall": {
                          "name": "best_country",
                          "args": {
                            "country": "Canada"
                          }
                        },
                        "thoughtSignature": "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"
                      },
                      {
                        "functionCall": {
                          "name": "best_country",
                          "args": {
                            "country": "USA"
                          }
                        }
                      }
                    ],
                    "role": "model"
                  },
                  "finishReason": "STOP",
                  "index": 0
                }
              ],
              "usageMetadata": {
                "promptTokenCount": 115,
                "candidatesTokenCount": 30,
                "totalTokenCount": 507,
                "promptTokensDetails": [
                  {
                    "modality": "TEXT",
                    "tokenCount": 115
                  }
                ],
                "thoughtsTokenCount": 362
              },
              "modelVersion": "gemini-2.5-pro",
              "responseId": "t-iDaIbgOeyr1MkPsaydqAY"
            }
        headers:
            Alt-Svc:
                - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
            Content-Type:
                - application/json; charset=UTF-8
            Server:
                - scaffolding on HTTPServer2
            Server-Timing:
                - gfet4t7; dur=6711
            Vary:
                - Origin
                - X-Origin
                - Referer
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Xss-Protection:
                - "0"
        status: 200 OK
        code: 200
        duration: 6.723s

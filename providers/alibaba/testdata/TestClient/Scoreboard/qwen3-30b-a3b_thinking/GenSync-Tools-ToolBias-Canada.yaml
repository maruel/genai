---
version: 2
interactions:
    - id: 0
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 548
        host: dashscope-us.aliyuncs.com
        body: |
            {"model":"qwen3-30b-a3b","messages":[{"role":"user","content":"I wonder if Canada is a better country than the USA? Call the tool best_country to tell me which country is the best one."}],"stream":false,"tool_choice":"auto","tools":[{"type":"function","function":{"name":"best_country","description":"A tool to specify the best country","parameters":{"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"country":{"type":"string","enum":["Canada","USA"]}},"additionalProperties":false,"type":"object","required":["country"]}}}]}
        headers:
            Content-Type:
                - application/json; charset=utf-8
        url: https://dashscope-us.aliyuncs.com/compatible-mode/v1/chat/completions
        method: POST
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: -1
        uncompressed: true
        body: '{"choices":[{"message":{"content":"","reasoning_content":"Okay, the user is asking if Canada is better than the USA and wants me to call the best_country tool. Let me check the tools provided.\n\nThe tool ''best_country'' takes a country parameter which can be either Canada or USA. The user is specifically asking about Canada versus the USA, so I need to determine which one to input. But the tool''s description says it''s to specify the best country, but the parameters only allow one country at a time. Wait, the function''s parameters have an enum with both Canada and USA. So maybe the function is designed to return which one is better based on some criteria, but the way it''s structured, you can only pass one country. Hmm, maybe the function is meant to be called twice, once for each country? Or perhaps the function compares them internally. But according to the schema, the parameters require a single country. \n\nWait, the user is asking which is better, so maybe I need to call the function for both countries? But the tool''s parameters don''t allow specifying both. The function''s required parameter is ''country'', which is a single string. So perhaps the function is not designed to compare them directly. Maybe the user''s question is ambiguous. However, the user instructed to call the tool best_country to tell which is the best. Since the tool can only take one country, maybe the user expects the assistant to call the tool for each country and then compare? But the assistant can only make one tool call here. Alternatively, maybe the function is designed to return the best country based on some internal logic when given one of them. But that doesn''t make sense. \n\nWait, looking back, the function''s description says \"A tool to specify the best country\", but the parameters only allow one country. Maybe there''s a mistake in the tool''s design. However, as per the given tools, I have to work with what''s provided. The user is asking to compare Canada and the USA, so perhaps the correct approach is to call the tool for each country, but since the user said \"call the tool best_country\", maybe they expect a single call. But the tool can''t compare both. \n\nAlternatively, maybe the function is intended to return the best country based on certain criteria, and the user is asking which one is better. But since the tool requires a single country, perhaps the user''s query is not fully aligned with the tool''s capabilities. However, the user explicitly said to call the tool, so I need to proceed. \n\nSince the user is asking if Canada is better than the USA, maybe the assistant should call the tool with Canada as the argument. But the tool''s purpose is to specify the best country, so perhaps the function is designed to return which one is better when given one of them. But that''s not clear. Alternatively, maybe the function is a placeholder and the actual implementation would compare them, but according to the parameters, it''s only allowing one country. \n\nIn this case, since the user is asking to compare Canada and the USA, but the tool can only take one country, perhaps the correct approach is to call the tool for both countries. However, the user might expect a single tool call. But the instructions say to call the tool if needed. Since the user''s question is a comparison, but the tool can''t handle comparisons, maybe the assistant should clarify. However, the user''s instruction is to call the tool. \n\nAlternatively, maybe the function is designed to return the best country between the two when called, but the parameters are incorrectly set. But given the parameters, the assistant has to choose one. Since the user is asking if Canada is better, maybe the assistant should call the tool with Canada as the country parameter. But I''m not sure. Alternatively, maybe the function is supposed to return the best country based on some criteria, and the user''s question is to determine which is better. But without more info, I have to proceed with the given tool. \n\nSo, the user wants to know which is better, so the assistant should call the tool with both countries? But the tool can''t handle that. Therefore, perhaps the assistant should call the tool once for each country, but the user''s instruction is to call the tool once. This is a bit confusing. However, the user''s exact words are \"Call the tool best_country to tell me which country is the best one.\" So maybe the user expects the tool to return the best country, but the tool''s parameters require specifying one. Therefore, perhaps the tool is designed to return the best country when given a parameter, but that doesn''t make sense. \n\nAlternatively, maybe the tool is a simple function that returns the country passed to it as the best, but that''s not helpful. Given the ambiguity, but following the user''s instruction to call the tool, I''ll proceed to call the function with the country parameter as Canada, since the user is asking if Canada is better. But I''m not entirely sure if that''s the correct approach. Alternatively, maybe the function is supposed to compare them, but the parameters are not set up correctly. In any case, based on the given information, I''ll call the function with Canada as the argument.","role":"assistant","tool_calls":[{"function":{"arguments":"{\"country\": \"Canada\"}","name":"best_country"},"id":"call_0d57115865b242ea840d05","index":0,"type":"function"}]},"finish_reason":"tool_calls","index":0,"logprobs":null}],"object":"chat.completion","usage":{"prompt_tokens":211,"completion_tokens":1084,"total_tokens":1295,"completion_tokens_details":{"reasoning_tokens":1060}},"created":1772128259,"system_fingerprint":null,"model":"qwen3-30b-a3b","id":"chatcmpl-D_LzKVH89DxXIXqG"}'
        headers:
            Content-Type:
                - application/json
            Eagleeye-Traceid:
                - 0bc2426017721282510837105e27bc
            Req-Arrive-Time:
                - "1772128251090"
            Req-Cost-Time:
                - "8402"
            Resp-Start-Time:
                - "1772128259492"
            Server:
                - istio-envoy
            Strict-Transport-Security:
                - max-age=0
            Timing-Allow-Origin:
                - '*'
            Vary:
                - Accept-Encoding
                - Origin,Access-Control-Request-Method,Access-Control-Request-Headers
            X-Dashscope-Call-Gateway:
                - "true"
            X-Envoy-Upstream-Service-Time:
                - "8401"
        status: 200 OK
        code: 200
        duration: 8.424s

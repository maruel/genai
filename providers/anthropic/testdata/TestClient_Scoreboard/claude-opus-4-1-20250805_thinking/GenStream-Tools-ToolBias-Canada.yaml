---
version: 2
interactions:
- id: 0
  request:
    proto: HTTP/1.1
    proto_major: 1
    proto_minor: 1
    content_length: 633
    host: api.anthropic.com
    body: "{\"model\":\"claude-opus-4-1-20250805\",\"max_tokens\":32000,\"messages\":[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"I wonder if Canada is a better country than the USA? Call the tool best_country to tell me which country is the best one.\"}]}],\"stream\":true,\"thinking\":{\"budget_tokens\":1024,\"type\":\"enabled\"},\"tool_choice\":{\"type\":\"auto\"},\"tools\":[{\"description\":\"A tool to specify the best country\",\"input_schema\":{\"$schema\":\"https://json-schema.org/draft/2020-12/schema\",\"properties\":{\"country\":{\"type\":\"string\",\"enum\":[\"Canada\",\"USA\"]}},\"additionalProperties\":false,\"type\":\"object\",\"required\":[\"country\"]},\"name\":\"best_country\"}]}\n"
    headers:
      Anthropic-Version:
      - "2023-06-01"
      Content-Type:
      - application/json; charset=utf-8
    url: https://api.anthropic.com/v1/messages
    method: POST
  response:
    proto: HTTP/2.0
    proto_major: 2
    proto_minor: 0
    content_length: -1
    body: "event: message_start\ndata: {\"type\":\"message_start\",\"message\":{\"id\":\"msg_01UJR2NVNwtdXRo53QMw6adt\",\"type\":\"message\",\"role\":\"assistant\",\"model\":\"claude-opus-4-1-20250805\",\"content\":[],\"stop_reason\":null,\"stop_sequence\":null,\"usage\":{\"input_tokens\":470,\"cache_creation_input_tokens\":0,\"cache_read_input_tokens\":0,\"cache_creation\":{\"ephemeral_5m_input_tokens\":0,\"ephemeral_1h_input_tokens\":0},\"output_tokens\":4,\"service_tier\":\"standard\"}}     }\n\nevent: content_block_start\ndata: {\"type\":\"content_block_start\",\"index\":0,\"content_block\":{\"type\":\"thinking\",\"thinking\":\"\",\"signature\":\"\"}              }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\"The user is\"}               }\n\nevent: ping\ndata: {\"type\": \"ping\"}\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" asking me to call the \\\"best_country\\\" tool to\"}      }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" determine which country is better between Canada and the\"}      }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" USA. Looking at the tool, it\"}              }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" requires a \\\"country\\\" parameter that\"}       }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" must be either \\\"Canada\\\" or \\\"\"}        }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\"USA\\\". \\n\\nHowever, the user is\"} }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" asking me to determine which country is the\"}           }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" best one, not to specify a particular\"}               }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" country. The tool seems to be designed to\"}             }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" specify/declare which country is best\"}          }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\", not to compare or determine which one is better\"}   }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\". \\n\\nThis creates a logical issue - the user\"}     }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" wants me to use the tool to fin\"}  }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\"d out which country is best, but the\"}             }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" tool requires me to already specify which country I\"}        }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\"'m declaring as best. I cannot call\"}            }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" this tool without already choosing one of the countries\"}               }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\", but the user wants the tool to tell\"}   }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" them which is best.\\n\\nI should explain this issue\"}}\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" to the user - the tool doesn't compare\"}            }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" countries or determine which is best; it requires\"}         }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" me to specify which country I'm declaring\"}             }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" as best.\"}    }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"signature_delta\",\"signature\":\"EsgICkYIBxgCKkCydE+5yMLdi/Rq6BLLzE4HCd5TXmQpZh/UGo4KfQlVihxQdiIgDkgtu5nPbkTZkwbKCkphXFYby+qztktpz3pBEgzCe5xh07bdYFNts+8aDIw2i57zZnXOc6KpVSIwpPU9b0mWJx5MDNEe3KR5eZqVcO6WgZaS+BvMKgWbT/fcIfjy75PVeaemIA2fmm/CKq8HdJSYY5qnTVrJcyct5oOGN8KzQtW9o+xFUMO+6Dlgc9jrt5clklVR6b13yMFAcFEjIrwn/gSThMcWlAdg03mveTh8CgXsBIoaEkM8CUibykaa2VGBiuY5pD85T6L/GklpuRSiPibMIfXMRpIu659kRr/lQROjJt7QqY5HIw6AQRGmM2VTs/1emoUDXfc2KncLR/BfgibbtTyw70P1d13/PApJ7TPjxxErGOpJMq5Wz0Ri3inTc2RKF/WbXx8AAPv+0j3d4HpwT8EKyTS07tVD7flzUuvP45Mmz720uow58QShZBE5SXTgi8iR4kGBkAnXIG1zk9QkwVEligx4lCtqDMPTJxvH8UUTOzZgNUkW0vDJZXubd/SGefqBkO5j/C5VbqDE0wf53ep+PbE6I1RsQBCsM9ambJyH7tP89r/fDZDwN71ARZOyy4aE58vJ83AYf9LGgWSHeACoaDzag0CsuLvBQln2xsQHEbA/cGAz91ateuLRLigNgf2rjTdtZCgQBP/35iz4Yj8JnZPySVSjBYS+gQXNTMdOMISECsp5H8WKcS4GukkLgo3V2WY6GntAuczLrk/g9aUCc3DZYU5rEa79MtkgRpz9vciFI2MjlarOVA/q0B/aFJ2Reu55nlbxu02Sv++G8TWwdn4+kzusZo6rUL19q50magkNYjt130vBJziVCFdJjB1uvirQ7xwiE8tO3f90oeneIdAASbkX17zOEkfor0LaWsBw5ij5duCytP6wHDsEOrQdFZdQ6U34SuiFd0R4ZA64l5VyVtvwxLJcChapyHs1HS+jjw9GX3PBxqVPS17WRM9u3yoEjtsjI3lrk/RUU5lpvw/6FKwF0PSgssKyaGD6fNleaeZS/NYsgigJ2fd+aew1ga4dsVvbcFJW/YkvQHPVxNIufivlMmhBUrErdo/eHyeLdD7OUnzJ+dnkQiWGfUvAJWybx3j/OLCab94qRuvClphe/OCH4CX53qrM14lfCaNqHktz9+ehpAR2j1ZbSBZm4wcqNSeXzZOCiOdgIS4yHtK6kNszUVNSnXS9ttaSSqkYCjk66XjSYPUv/PNkaUFKxwISxQrpZBFv34yvXbKfnlYvcmQO/Z98EeTY8J8fhLcCV8zAvz4NIzB634Fcph/xKCNhPrivcNxNYDU90xYcxFh+H0ArCy1MihUKI6d/qPR6wOK6bA5qP+HPf5/7KxRmYOqqkBoXAG63OVbN9HZqEqmkegGotn5XDAg/41NcQEXKWi/Y4RgB\"}             }\n\nevent: content_block_stop\ndata: {\"type\":\"content_block_stop\",\"index\":0           }\n\nevent: content_block_start\ndata: {\"type\":\"content_block_start\",\"index\":1,\"content_block\":{\"type\":\"text\",\"text\":\"\"} }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\"I understand you'd like me to use the \\\"\"}    }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\"best_country\\\" tool, but there\"}     }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\"'s an important clarification needed.\"}         }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" The tool requires me to specify which country\"}             }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" (Canada or USA) to declare as the best\"}         }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" - it doesn't actually compare the\"}    }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" countries or determine which one is better.\"}   }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" \\n\\nThe tool needs a \\\"\"}       }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\"country\\\" parameter where I must choose either\"} }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" \\\"Canada\\\" or \\\"USA\\\" to\"}}\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" specify as the best country. It's not a\"}}\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" comparison tool that would tell us which is\"}        }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" objectively better.\\n\\nWould you like me\"} }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" to:\\n1. Call the tool\"}      }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" with \\\"Canada\\\" as the best\"}         }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" country?\\n2. Call the tool\"}               }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" with \\\"USA\\\" as the best country\"}         }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\"?\\n3. Or would you prefer to discuss\"}           }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" the actual differences between these countries instead?\\n\\nPlease\"}           }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" let me know which country you'd like me\"}    }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" to specify in the tool call, or\"}          }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" if you'd prefer a different approach to\"}            }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" comparing these nations.\"}              }\n\nevent: content_block_stop\ndata: {\"type\":\"content_block_stop\",\"index\":1       }\n\nevent: message_delta\ndata: {\"type\":\"message_delta\",\"delta\":{\"stop_reason\":\"end_turn\",\"stop_sequence\":null},\"usage\":{\"input_tokens\":470,\"cache_creation_input_tokens\":0,\"cache_read_input_tokens\":0,\"output_tokens\":400} }\n\nevent: message_stop\ndata: {\"type\":\"message_stop\"       }\n\n"
    headers:
      Anthropic-Ratelimit-Input-Tokens-Limit:
      - "2000000"
      Anthropic-Ratelimit-Input-Tokens-Remaining:
      - "2000000"
      Anthropic-Ratelimit-Input-Tokens-Reset:
      - "2025-08-29T14:31:17Z"
      Anthropic-Ratelimit-Output-Tokens-Limit:
      - "400000"
      Anthropic-Ratelimit-Output-Tokens-Remaining:
      - "400000"
      Anthropic-Ratelimit-Output-Tokens-Reset:
      - "2025-08-29T14:31:17Z"
      Anthropic-Ratelimit-Requests-Limit:
      - "4000"
      Anthropic-Ratelimit-Requests-Remaining:
      - "3999"
      Anthropic-Ratelimit-Requests-Reset:
      - "2025-08-29T14:31:17Z"
      Anthropic-Ratelimit-Tokens-Limit:
      - "2400000"
      Anthropic-Ratelimit-Tokens-Remaining:
      - "2400000"
      Anthropic-Ratelimit-Tokens-Reset:
      - "2025-08-29T14:31:17Z"
      Cache-Control:
      - no-cache
      Cf-Cache-Status:
      - DYNAMIC
      Cf-Ray:
      - 976cc04e8b26a2f4-YUL
      Content-Type:
      - text/event-stream; charset=utf-8
      Server:
      - cloudflare
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Via:
      - 1.1 google
      X-Envoy-Upstream-Service-Time:
      - "1602"
      X-Robots-Tag:
      - none
    status: 200 OK
    code: 200
    duration: 1.647s

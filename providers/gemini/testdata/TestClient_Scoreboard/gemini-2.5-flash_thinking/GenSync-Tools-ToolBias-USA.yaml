---
version: 2
interactions:
    - id: 0
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 672
        host: generativelanguage.googleapis.com
        body: |
            {"contents":[{"role":"user","parts":[{"text":"I wonder if the USA is a better country than Canada? Call the tool best_country to tell me which country is the best one."}]}],"tools":[{"functionDeclarations":[{"name":"best_country","description":"A tool to specify the best country","parameters":{"properties":{"country":{"enum":["USA","Canada"],"type":"STRING"}},"required":["country"],"type":"OBJECT"},"response":{"properties":{"response":{"type":"STRING"}},"required":["response"],"type":"OBJECT"}}]}],"toolConfig":{"functionCallingConfig":{"mode":"ANY"}},"generationConfig":{"responseModalities":["TEXT"],"thinkingConfig":{"includeThoughts":true,"thinkingBudget":512}}}
        headers:
            Content-Type:
                - application/json; charset=utf-8
        url: https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent
        method: POST
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: -1
        uncompressed: true
        body: |
            {
              "candidates": [
                {
                  "content": {
                    "parts": [
                      {
                        "text": "**Understanding the User's Query and Tool Limitations**\n\nOkay, so the user wants me to determine which country is \"best\" between the USA and Canada. They've explicitly requested the use of the `best_country` tool. My first thought is that the user's intent is to compare the two. However, the `best_country` tool is designed to declare a single country as \"best,\" not to provide a comparative analysis. That's the first hurdle.\n\nThe tool signature, `best_country(country: Literal['USA', 'Canada']) -\u003e BestCountryResponse:`, clearly limits me to choosing *one* country. I can't directly compare them with this particular tool. The user, being an expert in their field, will understand this technical constraint.\n\nThe user's phrasing, \"I wonder if the USA is a better country than Canada?\" suggests a focus on the USA, implying they might be looking for an answer in that direction. But the tool's purpose is not to answer that specific comparative question.\n\nGiven the constraints, I must choose either the USA or Canada and call the tool accordingly. The user *did* explicitly ask me to \"call the tool... to tell me which country is the best one,\" so I need to fulfill that request. Since the prompt implies a comparison centered around the USA, I'll choose to run `best_country(country=\"USA\")`. This will fulfill the user's request while acknowledging the tool's limitations in providing a direct comparison.\n",
                        "thought": true
                      },
                      {
                        "functionCall": {
                          "name": "best_country",
                          "args": {
                            "country": "USA"
                          }
                        },
                        "thoughtSignature": "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"
                      }
                    ],
                    "role": "model"
                  },
                  "finishReason": "STOP",
                  "index": 0
                }
              ],
              "usageMetadata": {
                "promptTokenCount": 115,
                "candidatesTokenCount": 15,
                "totalTokenCount": 518,
                "promptTokensDetails": [
                  {
                    "modality": "TEXT",
                    "tokenCount": 115
                  }
                ],
                "thoughtsTokenCount": 388
              },
              "modelVersion": "gemini-2.5-flash",
              "responseId": "jl2FaL_MCoiUjMcPhaig6AM"
            }
        headers:
            Alt-Svc:
                - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
            Content-Type:
                - application/json; charset=UTF-8
            Server:
                - scaffolding on HTTPServer2
            Server-Timing:
                - gfet4t7; dur=3591
            Vary:
                - Origin
                - X-Origin
                - Referer
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Xss-Protection:
                - "0"
        status: 200 OK
        code: 200
        duration: 3.602s
